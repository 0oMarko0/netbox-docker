#!/bin/bash

. hooks/common

# test 'branches' and 'this' (i.e. pull request) builds
if [ "${BUILD}" == "branches" ] \
   || [ "${BUILD}" == "this" ] \
   || [ "${DEBUG}" == "true" ]; then
  echo "🐳🐳🐳 Testing"
  VERSION=latest docker-compose run netbox ./manage.py test
  VERSION=snapshot docker-compose run netbox ./manage.py test
  docker-compose down -v
else
  echo "🐳🐳🐳 No tests are implemented for build '${BUILD}'."
fi
